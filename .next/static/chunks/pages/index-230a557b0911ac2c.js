(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1126:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1514)}])},1514:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a(2676),l=a(5271);let i="74e9b08e7a1d55757f0fde1401cbaf85de1422ad",o=async()=>{if(!i)throw Error("AQI_TOKEN is not defined");let e=await fetch("".concat("https://api.waqi.info/feed/here/?token=").concat(i)),t=await e.json();return console.log(t),t},r=async e=>{if(!i)throw Error("AQI_TOKEN is not defined");let t=await fetch("https://api.waqi.info/feed/".concat(encodeURIComponent(e),"/?token=").concat(i)),a=await t.json();if("error"===a.status)throw Error(a.data);return a},c={dark:{bg:"#1a1a2e",text:"#ffffff",secondary:"#9999aa",input:"#2d2d45"},light:{bg:"#ffffff",text:"#000000",secondary:"#666666",input:"#f0f0f0"}},s=e=>e<=50?{level:"Good",color:"#009966"}:e<=100?{level:"Moderate",color:"#ffde33"}:e<=150?{level:"Unhealthy for Sensitive Groups",color:"#ff9933"}:e<=200?{level:"Unhealthy",color:"#cc0033"}:e<=300?{level:"Very Unhealthy",color:"#660099"}:{level:"Hazardous",color:"#7e0023"},d=e=>e.split(/[,(]/)[0].trim();var u=a(2314),h=a.n(u);let _=e=>{let{searchQuery:t,setSearchQuery:a,handleSearch:l,theme:i}=e;return(0,n.jsxs)("form",{onSubmit:l,className:h().form,children:[(0,n.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"Search city...",className:h().input,style:{backgroundColor:i.input,color:i.text}}),(0,n.jsx)("button",{type:"submit",className:h().button,style:{backgroundColor:i.input,color:i.text},children:"\uD83D\uDD0D"})]})};var f=a(4310),x=a.n(f);let v=e=>{var t,a,l,i,o,r;let{aqiData:c,theme:s}=e;return(0,n.jsxs)("div",{className:x().container,children:[(0,n.jsx)("h2",{children:"Pollutants"}),(0,n.jsx)("div",{className:x().grid,children:Object.entries({"PM2.5":null===(t=c.data.iaqi.pm25)||void 0===t?void 0:t.v,PM10:null===(a=c.data.iaqi.pm10)||void 0===a?void 0:a.v,O3:null===(l=c.data.iaqi.o3)||void 0===l?void 0:l.v,NO2:null===(i=c.data.iaqi.no2)||void 0===i?void 0:i.v,SO2:null===(o=c.data.iaqi.so2)||void 0===o?void 0:o.v,CO:null===(r=c.data.iaqi.co)||void 0===r?void 0:r.v}).map(e=>{let[t,a]=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{style:{color:s.text},children:[t,":"]}),(0,n.jsx)("p",{className:x().pollutantValue,style:{color:s.secondary},children:a||"N/A"})]},t)})})]})};var p=a(2333),m=a.n(p);function y(){let[e,t]=(0,l.useState)(null),[a,i]=(0,l.useState)(!0),[u,h]=(0,l.useState)(""),[f,x]=(0,l.useState)(!0),[p,y]=(0,l.useState)(""),N=f?c.dark:c.light,j=async e=>{if(e.preventDefault(),p.trim()){i(!0);try{let e=await r(p);t(e),h("")}catch(e){h("City not found")}finally{i(!1)}}};return(0,l.useEffect)(()=>{(async()=>{i(!0);try{let e=await o();t(e)}catch(e){h("Failed to fetch AQI data")}finally{i(!1)}})()},[]),(0,n.jsxs)("div",{className:m().container,style:{backgroundColor:N.bg,color:N.text},children:[(0,n.jsxs)("div",{className:m().header,children:[(0,n.jsx)("h1",{className:m().title,children:"Air Quality Index"}),(0,n.jsx)("button",{onClick:()=>x(!f),className:m().themeToggle,children:f?"\uD83C\uDF19":"\uD83C\uDF1E"})]}),(0,n.jsx)(_,{searchQuery:p,setSearchQuery:y,handleSearch:j,theme:N}),a&&(0,n.jsx)("p",{children:"Loading..."}),u&&(0,n.jsx)("p",{style:{color:"red"},children:u}),e&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:m().cityName,children:d(e.data.city.name)}),(0,n.jsxs)("div",{className:m().aqiBox,style:{backgroundColor:s(e.data.aqi).color},children:[(0,n.jsx)("div",{className:m().aqiValue,children:e.data.aqi}),(0,n.jsx)("div",{children:s(e.data.aqi).level})]}),(0,n.jsx)(v,{aqiData:e,theme:N})]}),(0,n.jsxs)("div",{className:m().footer,children:["Created by:"," ",(0,n.jsx)("a",{href:"https://hellopeople.vercel.app",target:"_blank",rel:"noopener noreferrer",className:m().link,children:"Cody Kung"})]})]})}},4310:function(e){e.exports={container:"PollutantGrid_container___f0Mq",grid:"PollutantGrid_grid__yJUs_",pollutantValue:"PollutantGrid_pollutantValue__xhv4N"}},2314:function(e){e.exports={form:"SearchBar_form__YP3wg",input:"SearchBar_input__4jZzZ",button:"SearchBar_button__QiAyH"}},2333:function(e){e.exports={container:"index_container__Wxv5N",header:"index_header__MHF_t",title:"index_title__Hhl0T",themeToggle:"index_themeToggle__tO_Gf",cityName:"index_cityName__P0Smf",aqiBox:"index_aqiBox__rB_bW",aqiValue:"index_aqiValue__u__ns",footer:"index_footer__7ek2e",link:"index_link__GSB_G"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1126)}),_N_E=e.O()}]);